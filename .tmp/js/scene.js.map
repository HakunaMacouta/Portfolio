{"version":3,"sources":["scene.js"],"names":["camera","controls","scene","stats","renderer","cssScene","cssRenderer","composer","glitchPass","outlinePass","poster","raycaster","THREE","Raycaster","mouse","Vector2","modelScale","init","initScene","initCSS3D","initLights","initPostProcessing","animate","PerspectiveCamera","window","innerWidth","innerHeight","position","set","OrbitControls","enableZoom","enablePan","maxPolarAngle","Math","PI","minAzimuthAngle","maxAzimuthAngle","update","Scene","background","Color","axesHelper","AxesHelper","add","Stats","document","body","appendChild","dom","addEventListener","aspect","updateProjectionMatrix","setSize","x","event","clientX","y","clientY","setFromCamera","intersects","intersectObjects","children","length","selectedObjects","undefined","push","WebGLRenderer","antialias","domElement","CSS3DRenderer","style","top","mtlLoader","MTLLoader","load","materials","opacity","blending","NoBlending","preload","objLoader","OBJLoader","setMaterials","object","scale","z","castShadow","receiveShadow","i","mesh","name","callback","console","log","ambiantLight","AmbientLight","light","PointLight","pointLightHelper","PointLightHelper","cube","EffectComposer","addPass","RenderPass","OutlinePass","GlitchPass","renderToScreen","e","requestAnimationFrame","begin","end","render"],"mappings":"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","file":"scene.js","sourcesContent":["var camera, controls, scene, stats, renderer;\r\nvar cssScene, cssRenderer;\r\nvar composer, glitchPass, outlinePass;\r\nvar poster;\r\nvar raycaster = new THREE.Raycaster();\r\nvar mouse = new THREE.Vector2();\r\n\r\nconst modelScale = 6;\r\n\r\nfunction init() {\r\n\tinitScene();\r\n\tinitCSS3D();\r\n\tinitLights();\r\n\tinitPostProcessing();\r\n\tanimate();\r\n}\r\n\r\nfunction initScene() {\r\n\t/** CAMERA **/\r\n\tcamera = new THREE.PerspectiveCamera( 70, window.innerWidth / window.innerHeight, 0.01, 1000 );\r\n\tcamera.position.set( 15, 5, 0 );\r\n\r\n\t/** CONTROLS **/\r\n\tcontrols = new THREE.OrbitControls(camera);\r\n\tcontrols.enableZoom = false;\r\n\tcontrols.enablePan = false;\r\n\tcontrols.maxPolarAngle = Math.PI/2;\r\n\tcontrols.minAzimuthAngle = Math.PI/2;\r\n\tcontrols.maxAzimuthAngle = Math.PI;\r\n\tcontrols.update();\r\n\t/** SCENE **/\r\n\tscene = new THREE.Scene();\r\n\tcssScene = new THREE.Scene();\r\n\tscene.background = new THREE.Color( 0x000000 );\r\n\r\n\t/** HELPERS **/\r\n\t// X AXIS IS RED // Y AXIS IS GREEN // Z AXIS IS BLUE\r\n\tvar axesHelper = new THREE.AxesHelper( 100 );\r\n\tscene.add( axesHelper );\r\n\r\n\tstats = new Stats();\r\n\tdocument.body.appendChild( stats.dom );\r\n\t/** CALLBACKS **/\r\n\twindow.addEventListener( 'resize', function() {\r\n\t\tcamera.aspect = window.innerWidth / window.innerHeight;\r\n\t\tcamera.updateProjectionMatrix();\r\n\t\trenderer.setSize( window.innerWidth, window.innerHeight );\r\n\t}, false );\r\n\twindow.addEventListener( 'mousemove', function() {\r\n\t\tmouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\r\n\t\tmouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\r\n\r\n\t\traycaster.setFromCamera( mouse, camera );\r\n\t\t// calculate objects intersecting the picking ray\r\n\t\tvar intersects = raycaster.intersectObjects( scene.children );\r\n\t\tif(intersects.length > 0) {\r\n\t\t\toutlinePass.selectedObjects = [];\r\n\t\t\tif(poster !== undefined) {\r\n\t\t\t\toutlinePass.selectedObjects.push(poster);\r\n\t\t\t}\r\n\t\t}\r\n\t}, false );\r\n\r\n\t/** RENDERER **/\r\n\trenderer = new THREE.WebGLRenderer( { antialias: true } );\r\n\trenderer.setSize( window.innerWidth, window.innerHeight );\r\n\tdocument.body.appendChild( renderer.domElement );\r\n\r\n\tcssRenderer = new THREE.CSS3DRenderer();\r\n\tcssRenderer.setSize( window.innerWidth, window.innerHeight );\r\n\tcssRenderer.domElement.style.position = 'absolute';\r\n\tcssRenderer.domElement.style.top = 0;\r\n\tdocument.body.appendChild( cssRenderer.domElement );\r\n\r\n\r\n\tvar mtlLoader = new THREE.MTLLoader();\r\n\tmtlLoader.load( \"../model/workshop/materials.mtl\", function( materials ) {\r\n\t\tmaterials.opacity   = 0;\r\n\t\tmaterials.blending  = THREE.NoBlending;\r\n\t\tmaterials.preload();\r\n\t\tvar objLoader = new THREE.OBJLoader();\r\n\t\tobjLoader.setMaterials( materials );\r\n\t\tobjLoader.load( \"../model/workshop/model.obj\", function(object) {\r\n\t\t\tobject.scale.set(object.scale.x * modelScale, object.scale.y * modelScale, object.scale.z * modelScale);\r\n\t\t\tobject.castShadow = true;\r\n\t\t\tobject.receiveShadow = true;\r\n\t\t\tfor(var i = 0; i < object.children.length; i++) {\r\n\t\t\t\tvar mesh = object.children[i];\r\n\t\t\t\tmesh.castShadow = true;\r\n\t\t\t\tmesh.receiveShadow = true;\r\n\t\t\t\tif(mesh.name === \"mesh1854588575\") {\r\n\t\t\t\t\tposter = mesh;\r\n\t\t\t\t\tposter.callback = function() { console.log( this.name ); }\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tposter.scale.set(1,1,1);\r\n\t\t\tconsole.log(object);\r\n\t\t\tscene.add(object);\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction initLights() {\r\n\tvar ambiantLight = new THREE.AmbientLight( 0x404040 ); // soft white light\r\n\tscene.add( ambiantLight );\r\n\tvar light = new THREE.PointLight( 0x5555ff, 1, 100 );\r\n\tlight.position.set( 0, 4, -4 );\r\n\tscene.add( light );\r\n\tlight.castShadow = true;\r\n\tvar pointLightHelper = new THREE.PointLightHelper( light, 1 );\r\n\tscene.add( pointLightHelper );\r\n}\r\nvar cube;\r\nfunction initPostProcessing() {\r\n\tcomposer = new THREE.EffectComposer( renderer );\r\n\tcomposer.addPass( new THREE.RenderPass( scene, camera ) );\r\n\toutlinePass = new THREE.OutlinePass(new THREE.Vector2(window.innerWidth, window.innerHeight), scene, camera);\r\n\tcomposer.addPass( outlinePass );\r\n\tglitchPass = new THREE.GlitchPass();\r\n\tglitchPass.renderToScreen = true;\r\n\tcomposer.addPass( glitchPass );\r\n}\r\n\r\nfunction animate(e) {\r\n\trequestAnimationFrame( animate );\r\n\tstats.begin();\r\n\tcontrols.update();\r\n\tstats.end();\r\n\tcomposer.render();\r\n\t// renderer.render( scene, camera );\r\n\t// cssRenderer.render(cssScene, camera);\r\n\r\n}\r\n\r\ninit();\r\n"]}